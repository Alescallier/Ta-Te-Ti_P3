<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ta‑Te‑Ti</title>
  <style>
    :root{
      --bg:#1f1723;          
      --panel:#111827;       
      --card:#1f2937;        
      --muted:#94a3b8;       
      --text:#f8fafc;        
      --accent:#22d3ee;      
      --accent-2:#a78bfa;    
      --win:#22c55e;         
      --lose:#ef4444;        
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      background:radial-gradient(1000px 600px at 10% 10%, #0b1226 0%, var(--bg) 60%),
                 radial-gradient(1200px 800px at 90% 90%, #121a33 0%, var(--bg) 60%);
      color:var(--text);
      font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    }
    .app{
      width:min(900px, 92vw);
      display:grid;
      gap:18px;
      padding:20px;
      background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border:1px solid rgba(255,255,255,0.06);
      border-radius:22px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 0 60px rgba(255,255,255,0.03);
      backdrop-filter: blur(6px);
    }
    header{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    h1{font-size:clamp(22px, 2.4vw, 30px); margin:0; letter-spacing:0.5px}
    .badges{display:flex; gap:10px; align-items:center}
    .badge{padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,0.1); background:rgba(31,41,55,0.6);}
    .board{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
      width:100%;
      aspect-ratio: 1/1;
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      padding:12px; border-radius:20px; border:1px solid rgba(255,255,255,0.06);
    }
    .cell{
      display:grid; place-items:center;
      font-weight:800;
      font-size: clamp(44px, 9vw, 90px);
      color:var(--text);
      border-radius:18px;
      background:var(--card);
      border:1px solid rgba(255,255,255,0.08);
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.02), 0 10px 16px rgba(0,0,0,0.25);
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .2s ease, border-color .2s ease;
      user-select:none;
      position:relative;
      outline:none;
    }
    .cell:hover{ transform: translateY(-2px); box-shadow: 0 16px 22px rgba(0,0,0,0.35); }
    .cell:focus-visible{ box-shadow: 0 0 0 3px rgba(34,211,238,0.5), 0 8px 18px rgba(0,0,0,0.35); }
    .cell.disabled{ cursor:not-allowed; opacity:.9 }
    .cell[data-value="X"]{ text-shadow: 0 6px 18px rgba(167,139,250,.45); color: var(--accent-2); }
    .cell[data-value="O"]{ text-shadow: 0 6px 18px rgba(34,211,238,.45); color: var(--accent); }
    .cell.win{ box-shadow: inset 0 0 0 3px var(--win), 0 10px 16px rgba(0,0,0,0.35); }

    .panel{
    display:grid; grid-template-columns: 1.2fr .8fr; gap:16px;
    }
    @media (max-width: 720px){ .panel{ grid-template-columns: 1fr; } }

    .status, .scores{
      background: var(--panel);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:18px; padding:16px; display:grid; gap:12px;
    }
    .row{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .player-pill{
      display:flex; align-items:center; gap:10px; padding:10px 14px; border-radius:14px;
      background: #0b1022; border:1px solid rgba(255,255,255,0.08);
    }
    .dot{width:10px; height:10px; border-radius:999px;}
    .dot.x{ background: var(--accent-2) }
    .dot.o{ background: var(--accent) }
    .turn{font-weight:700}
    .controls{ display:flex; gap:10px; flex-wrap:wrap }
    button{
      appearance:none; border:none; cursor:pointer; color:var(--text); font-weight:700;
      padding:10px 14px; border-radius:12px; background:linear-gradient(180deg, #334155, #1f2937);
      border:1px solid rgba(255,255,255,0.12); box-shadow: 0 6px 14px rgba(0,0,0,0.35);
      transition: transform .08s ease, filter .08s ease;
    }
    button:hover{ filter:brightness(1.08) }
    button:active{ transform: translateY(1px) }
    .ghost{ background:transparent; border-color: rgba(255,255,255,0.18) }
    .danger{ background: linear-gradient(180deg, #ef4444, #b91c1c) }

    .toast{ font-size: 14px; color:var(--muted) }
    .footer{ font-size:12px; color:var(--muted); text-align:center; margin-top:6px }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Ta‑Te‑Ti">
    <header>
      <h1>Ta‑Te‑Ti</h1>
      <div class="badges">
        <div class="badge">2 jugadores</div>
        <div class="badge">Accesible (teclado)</div>
      </div>
    </header>

    <div class="panel">
      <div class="status">
        <div class="row">
          <div class="player-pill"><span class="dot x"></span> X</div>
          <div class="player-pill"><span class="dot o"></span> O</div>
        </div>
        <div class="row">
          <div class="turn" id="turn">Turno: X</div>
          <div class="toast" id="toast">Empezá tocando un casillero</div>
        </div>
        <div class="controls">
          <button id="btnReset">Reiniciar ronda</button>
          <button class="ghost" id="btnSwap">X empieza / Cambiar</button>
          <button class="danger" id="btnResetAll" title="Pone a cero los marcadores">Reiniciar todo</button>
        </div>
      </div>

      <div class="scores">
        <div class="row"><strong>Marcador</strong><span id="rounds">Ronda #1</span></div>
        <div class="row"><span>Victorias X</span><strong id="scoreX">0</strong></div>
        <div class="row"><span>Victorias O</span><strong id="scoreO">0</strong></div>
        <div class="row"><span>Empates</span><strong id="scoreT">0</strong></div>
        <div class="footer">Tip: también podés usar Tab + Enter para jugar con teclado.</div>
      </div>
    </div>

    <div class="board" id="board" aria-label="Tablero de 3 por 3" role="grid">
      <!-- 9 celdas -->
    </div>
  </div>

  <script>
    const boardEl = document.getElementById('board');
    const turnEl  = document.getElementById('turn');
    const toastEl = document.getElementById('toast');
    const scoreXEl= document.getElementById('scoreX');
    const scoreOEl= document.getElementById('scoreO');
    const scoreTEl= document.getElementById('scoreT');
    const roundsEl= document.getElementById('rounds');

    const btnReset = document.getElementById('btnReset');
    const btnSwap  = document.getElementById('btnSwap');
    const btnResetAll = document.getElementById('btnResetAll');

    const WINS = [
      [0,1,2],[3,4,5],[6,7,8], // filas
      [0,3,6],[1,4,7],[2,5,8], // columnas
      [0,4,8],[2,4,6]          // diagonales
    ];

    let state, current, gameOver, scores, round;

    function init(resetScores=false){
      // Crear celdas si no existen
      if(!boardEl.children.length){
        for(let i=0;i<9;i++){
          const c = document.createElement('button');
          c.className = 'cell';
          c.setAttribute('role', 'gridcell');
          c.setAttribute('aria-label', `Casillero ${i+1}`);
          c.dataset.index = i;
          c.addEventListener('click', onCellClick);
          c.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); onCellClick.call(c, e);} });
          boardEl.appendChild(c);
        }
      }
      state = Array(9).fill('');
      gameOver = false;
      for(const cell of boardEl.children){
        cell.textContent = '';
        cell.dataset.value = '';
        cell.classList.remove('disabled','win');
        cell.disabled = false;
      }
      if(resetScores || !scores){ scores = {X:0,O:0,T:0}; round = 1; }
      updateScores();
      turnEl.textContent = `Turno: ${current || 'X'}`;
      toastEl.textContent = 'Empezá tocando un casillero';
    }

    function onCellClick(){
      const idx = Number(this.dataset.index);
      if(gameOver || state[idx]) return;
      state[idx] = current;
      this.textContent = current;
      this.dataset.value = current;

      const winLine = getWinLine();
      if(winLine){
        gameOver = true;
        toastEl.textContent = `¡Ganó ${current}!`;
        winLine.forEach(i=>{
          const cell = boardEl.children[i];
          cell.classList.add('win');
        });
        addScore(current);
        disableBoard();
        return;
      }
      if(state.every(Boolean)){
        gameOver = true;
        toastEl.textContent = 'Empate';
        addScore('T');
        disableBoard();
        return;
      }
      current = current === 'X' ? 'O' : 'X';
      turnEl.textContent = `Turno: ${current}`;
      toastEl.textContent = 'Tu jugada';
    }

    function getWinLine(){
      for(const combo of WINS){
        const [a,b,c] = combo;
        if(state[a] && state[a]===state[b] && state[a]===state[c]) return combo;
      }
      return null;
    }

    function disableBoard(){
      for(const cell of boardEl.children){ cell.classList.add('disabled'); cell.disabled = true; }
      round += 1; roundsEl.textContent = `Ronda #${round}`;
    }

    function addScore(who){
      if(who==='X') scores.X++; else if(who==='O') scores.O++; else scores.T++;
      updateScores();
    }
    function updateScores(){
      scoreXEl.textContent = scores.X;
      scoreOEl.textContent = scores.O;
      scoreTEl.textContent = scores.T;
      roundsEl.textContent = `Ronda #${round}`;
    }

    // Botones
    btnReset.addEventListener('click', ()=>{ init(false); });
    btnSwap.addEventListener('click', ()=>{
      current = current==='X' ? 'O' : 'X';
      turnEl.textContent = `Turno: ${current}`;
      toastEl.textContent = `${current} empieza esta ronda`;
      init(false);
    });
    btnResetAll.addEventListener('click', ()=>{
      current = 'X';
      init(true);
      toastEl.textContent = 'Todo a cero. ¡A jugar!';
    });

    // Inicio
    current = 'X';
    init(true);
  </script>
</body>
</html>
